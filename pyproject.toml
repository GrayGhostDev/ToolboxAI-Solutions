[tool.black]
line-length = 100
target-version = ['py311']
include = '\.pyi?$'
extend-exclude = '''
/(
  # directories
  \.eggs
  | \.git
  | \.hg
  | \.mypy_cache
  | \.tox
  | \.venv
  | venv
  | venv_clean
  | _build
  | buck-out
  | build
  | dist
  | node_modules
)/
'''

[tool.isort]
profile = "black"
line_length = 100
skip_gitignore = true
skip = ["venv", "venv_clean", "node_modules"]

[tool.mypy]
python_version = "3.11"
warn_return_any = true
warn_unused_configs = true
disallow_untyped_defs = true
ignore_missing_imports = true
exclude = ["venv/", "venv_clean/", "node_modules/", "dist/", "build/"]

[tool.pytest.ini_options]
minversion = "6.0"
addopts = "-ra -q --strict-markers"
testpaths = ["tests/unit", "tests/integration"]
python_files = "test_*.py"
python_classes = "Test*"
python_functions = "test_*"
# Fix asyncio event loop issues - 2025 best practice
asyncio_mode = "auto"
asyncio_default_fixture_loop_scope = "session"

# Basedpyright Configuration - 2025 Production Ready
[tool.basedpyright]
# File inclusion and exclusion
include = [
    "**/*.py",
    "roblox/**/*.py",
    "apps/**/*.py",
    "core/**/*.py",
    "src/**/*.py",
]
exclude = [
    "**/node_modules",
    "**/__pycache__",
    "**/venv",
    "**/venv_clean",
    "**/.git",
    "**/.vscode",
    "**/.cursor",
    "**/site-packages",
    "Archive/**",
    "Documentation/**",
    "**/deprecated/**",
    "**/test_*/**",
    "**/tests/**",
    "**/backups/**",
]

# Python environment configuration
venvPath = "."
venv = "venv_clean"
pythonVersion = "3.11"
pythonPlatform = "Darwin"
typeCheckingMode = "standard"

# Import and type checking settings
reportMissingImports = false
reportMissingTypeStubs = false
reportUnusedVariable = "warning"
reportUnusedImport = "warning"
useLibraryCodeForTypes = true
autoImportCompletions = true

# Stub path for type definitions
stubPath = "src/shared/types"

# Additional Python paths
extraPaths = [
    "roblox",
    "roblox/API",
    "roblox/Config",
    "roblox/modules",
    "roblox/plugins",
    "roblox/scripts",
    "roblox/src",
    "roblox/tests",
    "apps/backend",
    "apps/backend/core",
    "apps/backend/api",
    "apps/backend/services",
    "apps/backend/models",
    "core",
    "core/agents",
    "core/database",
    "core/mcp",
    "core/sparc",
    "core/swarm",
    "src",
    "src/shared",
    "src/shared/utils",
    "src/shared/types",
]

# Basedpyright-specific enhanced features
# Enable baseline support for gradual adoption
baselineFile = ".basedpyright/baseline.json"

# Enhanced type checking rules (basedpyright defaults)
reportOptionalMemberAccess = "warning"
reportOptionalSubscript = "warning"
reportPrivateImportUsage = "warning"
reportUnknownArgumentType = "warning"
reportUnknownMemberType = "warning"
reportUnknownVariableType = "warning"
reportUntypedFunctionDecorator = "warning"
reportUntypedClassDecorator = "warning"
reportUntypedBaseClass = "warning"
reportUntypedNamedTuple = "warning"
reportCallInDefaultInitializer = "warning"
reportUnnecessaryIsInstance = "warning"
reportUnnecessaryCast = "warning"
reportUnnecessaryComparison = "warning"
reportUnnecessaryContains = "warning"
reportAssertAlwaysTrue = "warning"
reportSelfClsParameterName = "warning"
reportImplicitStringConcatenation = "warning"
reportInvalidStringEscapeSequence = "warning"
reportUnknownLambdaType = "warning"
reportUnknownParameterType = "warning"
reportUnusedCoroutine = "warning"
reportUnusedCallResult = "warning"
reportUnusedExpression = "warning"
reportUnnecessaryTypeIgnoreComment = "warning"
reportImplicitOverride = "warning"
reportShadowedImports = "warning"
reportUninitializedInstanceVariable = "warning"
reportInvalidTypeVarUse = "warning"

# Basedpyright-specific enhanced rules
reportIncompatibleMethodOverride = "warning"
reportIncompatibleVariableOverride = "warning"
reportInconsistentConstructor = "warning"
reportOverlappingOverload = "warning"
reportPossiblyUnboundVariable = "warning"

# Pylance features available in basedpyright
reportMissingSuperCall = "warning"
reportUnusedClass = "warning"
reportUnusedFunction = "warning"
reportDuplicateImport = "warning"
reportWildcardImportFromLibrary = "warning"
reportAbstractUsage = "warning"
reportUnsupportedDunderAll = "warning"
