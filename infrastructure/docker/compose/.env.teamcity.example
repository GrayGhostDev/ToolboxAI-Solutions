# ============================================
# TEAMCITY ENVIRONMENT CONFIGURATION
# ============================================
# Copy this file to .env.teamcity and update with your values
# DO NOT commit .env.teamcity to version control!
# ============================================

# ============================================
# TeamCity Server Configuration
# ============================================

# TeamCity Server Port (default: 8111)
TEAMCITY_PORT=8111

# TeamCity Server URL (for agents to connect)
TEAMCITY_SERVER_URL=http://teamcity-server:8111

# Docker Image Tag (default: latest)
DOCKER_TAG=latest

# ============================================
# General Configuration
# ============================================

# Timezone (default: UTC)
TZ=UTC

# Log Level (DEBUG, INFO, WARN, ERROR)
LOG_LEVEL=INFO

# Node Environment (development, production, test)
NODE_ENV=production

# ============================================
# Agent Configuration
# ============================================

# Number of concurrent build agents to run
# Frontend Agents: 1
# Backend Agents: 1
# Integration Agents: 1
# Cloud Agents: 1
# Total: 4 agents (adjust based on your CPU/RAM)

# Agent Names (optional - will auto-generate if not set)
# AGENT_NAME_FRONTEND=Frontend-Builder-01
# AGENT_NAME_BACKEND=Backend-Builder-01
# AGENT_NAME_INTEGRATION=Integration-Builder-01
# AGENT_NAME_CLOUD=Cloud-Deployer-01

# ============================================
# Resource Limits
# ============================================

# CPU Limits (adjust based on your system)
# Frontend Agent: 4 CPUs, 4GB RAM
# Backend Agent: 4 CPUs, 4GB RAM
# Integration Agent: 4 CPUs, 6GB RAM
# Cloud Agent: 2 CPUs, 2GB RAM
# Server: 4 CPUs, 4GB RAM
# TOTAL RECOMMENDED: 16+ CPUs, 20GB+ RAM

# ============================================
# Network Configuration
# ============================================

# TeamCity Network Name
TEAMCITY_NETWORK=toolboxai_teamcity

# ============================================
# Build Tool Versions
# ============================================

# Node.js Version (baked into Dockerfile)
# NODE_VERSION=22.21.0

# pnpm Version (baked into Dockerfile)
# PNPM_VERSION=9.15.0

# Python Version (baked into Dockerfile)
# PYTHON_VERSION=3.12

# ============================================
# Optional: External Services
# ============================================

# GitHub Token (for private repository access)
# GITHUB_TOKEN=ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Docker Registry (for pushing built images)
# DOCKER_REGISTRY=registry.example.com
# DOCKER_USERNAME=your-username
# DOCKER_PASSWORD=your-password

# Artifact Storage (S3, Azure Blob, etc.)
# ARTIFACT_STORAGE_TYPE=s3
# ARTIFACT_STORAGE_BUCKET=teamcity-artifacts
# ARTIFACT_STORAGE_REGION=us-east-1

# ============================================
# Security
# ============================================

# TeamCity Admin Username (first-time setup)
# TEAMCITY_ADMIN_USERNAME=admin

# TeamCity Admin Password (first-time setup)
# TEAMCITY_ADMIN_PASSWORD=changeme

# ============================================
# Monitoring & Observability
# ============================================

# Enable Prometheus metrics export
# PROMETHEUS_ENABLED=false
# PROMETHEUS_PORT=9091

# Enable OpenTelemetry tracing
# OTEL_ENABLED=false
# OTEL_ENDPOINT=http://jaeger:4317

# ============================================
# Development vs Production
# ============================================

# Development Mode (enables additional logging, debugging)
# TEAMCITY_DEV_MODE=false

# Enable BuildKit for faster Docker builds
DOCKER_BUILDKIT=1
COMPOSE_DOCKER_CLI_BUILD=1

# ============================================
# Notes
# ============================================
# 1. After creating .env.teamcity, run: docker-compose -f docker-compose.teamcity.yml --env-file .env.teamcity up -d
# 2. Access TeamCity UI at: http://localhost:8111
# 3. First-time setup will require super user token from logs: docker logs teamcity-server | grep "Super user"
# 4. Agent authentication happens automatically via SERVER_URL
# 5. Customize agent configurations in /data/teamcity_agent/conf/buildAgent.properties
