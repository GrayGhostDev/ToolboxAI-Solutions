# pnpm Workflow Tests - Quick Start Guide\n\n## üöÄ 5-Minute Setup\n\n### Step 1: Verify Test File Exists\n```bash\nls -la __tests__/workflows/pnpm-workflows.test.ts\n```\n\n### Step 2: Install Test Dependencies\n```bash\npnpm add -D vitest\n```\n\n### Step 3: Run Tests\n```bash\n# Run all tests\npnpm test __tests__/workflows/pnpm-workflows.test.ts\n\n# Run with verbose output\npnpm test __tests__/workflows/pnpm-workflows.test.ts --reporter=verbose\n\n# Run specific test suite\npnpm test __tests__/workflows/pnpm-workflows.test.ts -t \"pnpm Setup Verification\"\n```\n\n---\n\n## üìã Test Suites Overview\n\n### Suite 1: pnpm Setup Verification\n**What it tests**: Initial pnpm configuration in workflows\n```bash\npnpm test -t \"pnpm Setup Verification\"\n```\n‚úì pnpm action installation  \n‚úì Node.js setup order  \n‚úì Version specifications  \n‚úì Cache configuration  \n\n### Suite 2: Dependency Installation Verification\n**What it tests**: Proper pnpm install usage with frozen lockfile\n```bash\npnpm test -t \"Dependency Installation Verification\"\n```\n‚úì --frozen-lockfile usage  \n‚úì No npm/yarn mixing  \n‚úì Working directory setup  \n‚úì Cache paths  \n\n### Suite 3: Script Execution Verification\n**What it tests**: pnpm script execution (lint, test, build, etc.)\n```bash\npnpm test -t \"Script Execution Verification\"\n```\n‚úì lint script execution  \n‚úì test script execution  \n‚úì build script execution  \n‚úì format:check execution  \n‚úì type-check execution  \n\n### Suite 4: Playwright E2E Testing Verification\n**What it tests**: Playwright test execution patterns\n```bash\npnpm test -t \"Playwright E2E Testing Verification\"\n```\n‚úì pnpm exec playwright install  \n‚úì pnpm exec playwright test  \n‚úì Browser matrix configuration  \n‚úì Artifact uploads  \n\n### Suite 5: Global Package Installation Verification\n**What it tests**: Global tools like Vercel CLI\n```bash\npnpm test -t \"Global Package Installation Verification\"\n```\n‚úì pnpm add -g usage  \n‚úì Vercel CLI installation  \n‚úì Version specifications  \n‚úì Installation order  \n\n### Suite 6: Error Handling and Edge Cases\n**What it tests**: Potential issues and conflicts\n```bash\npnpm test -t \"Error Handling and Edge Cases\"\n```\n‚úì Package manager conflicts  \n‚úì Reproducible build validation  \n‚úì NODE_VERSION environment variable  \n\n### Suite 7: Workflow Configuration Consistency\n**What it tests**: Cross-workflow consistency\n```bash\npnpm test -t \"Workflow Configuration Consistency\"\n```\n‚úì pnpm version consistency  \n‚úì Node.js version consistency  \n‚úì Cache configuration consistency  \n\n### Suite 8: Integration Testing\n**What it tests**: YAML structure and syntax\n```bash\npnpm test -t \"Integration Testing\"\n```\n‚úì Valid YAML structure  \n‚úì Required fields present  \n‚úì Proper job definitions  \n\n---\n\n## üîç Real-World Examples\n\n### Example 1: Verify Lint Scripts\n```bash\n# Check if all workflows have lint script\npnpm test -t \"should execute pnpm lint\"\n\n# Output:\n# ‚úì ci-cd-main.yml has lint\n# ‚úì testing-suite.yml has lint\n```\n\n### Example 2: Check Playwright Configuration\n```bash\n# Verify Playwright E2E setup\npnpm test -t \"Playwright E2E Testing Verification\"\n\n# Output shows:\n# ‚úì Browser matrix (chromium, firefox, webkit)\n# ‚úì Install before test execution\n# ‚úì Artifact uploads configured\n```\n\n### Example 3: Validate Global Package Installation\n```bash\n# Check Vercel CLI installation\npnpm test -t \"should use pnpm add -g for Vercel CLI\"\n\n# Output:\n# ‚úì Vercel CLI installed with pnpm add -g\n# ‚úì Installed before build steps\n# ‚úì Latest version specified\n```\n\n### Example 4: Cross-Workflow Consistency\n```bash\n# Ensure all workflows use same versions\npnpm test -t \"Workflow Configuration Consistency\"\n\n# Output:\n# ‚úì All workflows use pnpm v8\n# ‚úì All workflows use Node.js 20\n# ‚úì Cache configuration is identical\n```\n\n---\n\n## üêõ Troubleshooting\n\n### Problem: \"Cannot find module 'vitest'\"\n**Solution**:\n```bash\npnpm add -D vitest\npnpm test __tests__/workflows/pnpm-workflows.test.ts\n```\n\n### Problem: \"ENOENT: no such file or directory\"\n**Solution**: Run from project root\n```bash\ncd /Volumes/G-DRIVE\\ ArmorATD/Development/Clients/ToolBoxAI-Solutions\npnpm test __tests__/workflows/pnpm-workflows.test.ts\n```\n\n### Problem: \"Tests failed - ppnpm not pnpm\"\n**Issue**: Workflow has typo `ppnpm` instead of `pnpm`\n\n**Fix in workflow file**:\n```bash\n# Find the typo\ngrep -n \"ppnpm\" .github/workflows/*.yml\n\n# Example output:\n# ci-cd-main.yml:75:run: ppnpm install --frozen-lockfile\n\n# Fix it\nsed -i '' 's/ppnpm/pnpm/g' .github/workflows/ci-cd-main.yml\n\n# Verify fix\ngrep \"pnpm install\" .github/workflows/ci-cd-main.yml\n```\n\n---\n\n## üìä Understanding Test Output\n\n### Successful Run\n```\nPASS  __tests__/workflows/pnpm-workflows.test.ts\n\n‚úì pnpm Setup Verification (6 tests)\n  ‚úì should have pnpm action setup in ci-cd-main\n  ‚úì should have pnpm action setup in e2e-testing\n  ‚úì should have pnpm action setup in deploy-vercel\n  ‚úì should have pnpm action setup in testing-suite\n  ‚úì should have correct Node.js version in ci-cd-main\n  ‚úì should setup Node.js after pnpm setup\n\n‚úì Dependency Installation Verification (8 tests)\n‚úì Script Execution Verification (13 tests)\n‚úì Playwright E2E Testing Verification (7 tests)\n‚úì Global Package Installation Verification (4 tests)\n‚úì Error Handling and Edge Cases (5 tests)\n‚úì Workflow Configuration Consistency (3 tests)\n‚úì Integration Testing (2 tests)\n\nTest Files  1 passed (1)\n     Tests  48 passed (48)\n  Duration  245ms\n```\n\n### Failed Test\n```\nFAIL  __tests__/workflows/pnpm-workflows.test.ts\n\n‚úï Dependency Installation Verification > should use pnpm install --frozen-lockfile in ci-cd-main\n\nAssertion Error: Expected string to contain:\n  \"pnpm install --frozen-lockfile\"\n\nReceived:\n  \"ppnpm install --frozen-lockfile\"\n\nFile: .github/workflows/ci-cd-main.yml\nLine: 89\n```\n\n---\n\n## üîß Integration with Your Workflow\n\n### Add to CI Pipeline\nEdit `.github/workflows/ci.yml` or similar:\n\n```yaml\n- name: Validate pnpm workflow configuration\n  run: |\n    echo \"üîç Running pnpm workflow tests...\"\n    pnpm test __tests__/workflows/pnpm-workflows.test.ts\n    \n    if [ $? -eq 0 ]; then\n      echo \"‚úÖ All workflow validations passed\"\n    else\n      echo \"‚ùå Workflow validation failed\"\n      exit 1\n    fi\n```\n\n### Generate Coverage Report\n```bash\npnpm test __tests__/workflows/pnpm-workflows.test.ts --coverage\n\n# Output:\n# ‚úì File coverage: 100%\n# ‚úì Line coverage: 100%\n# ‚úì Branch coverage: 95%\n# ‚úì Function coverage: 100%\n```\n\n### Generate HTML Report\n```bash\npnpm test __tests__/workflows/pnpm-workflows.test.ts --coverage --reporter=html\n\n# Opens in browser\nopen coverage/index.html\n```\n\n---\n\n## üìù Test Results Checklist\n\n- [ ] All 8 test suites pass\n- [ ] 48+ individual tests pass\n- [ ] No \"ppnpm\" typos detected\n- [ ] All workflows use pnpm v8\n- [ ] All workflows use Node.js 20\n- [ ] No npm/yarn mixing detected\n- [ ] --frozen-lockfile used everywhere\n- [ ] Playwright tests configured correctly\n- [ ] Vercel CLI installed with pnpm add -g\n- [ ] Cache configuration consistent\n\n---\n\n## üéØ Common Test Commands\n\n```bash\n# Run all workflow tests\npnpm test __tests__/workflows/\n\n# Run with watch mode (auto-rerun on file changes)\npnpm test __tests__/workflows/ --watch\n\n# Run specific test by name pattern\npnpm test pnpm-workflows -t \"pnpm Setup\"\n\n# Run and show test names\npnpm test __tests__/workflows/ --reporter=verbose\n\n# Run with coverage threshold\npnpm test __tests__/workflows/ --coverage --coverage-provider=v8\n\n# Run and save results as JSON\npnpm test __tests__/workflows/ --reporter=json > test-results.json\n\n# Run single test file\npnpm test __tests__/workflows/pnpm-workflows.test.ts\n\n# Run with debugging\nDEBUG=* pnpm test __tests__/workflows/pnpm-workflows.test.ts\n```\n\n---\n\n## üìö Key Files\n\n| File | Purpose |\n|------|----------|\n| `__tests__/workflows/pnpm-workflows.test.ts` | Main test file (651 lines) |\n| `__tests__/workflows/PNPM_TESTS_README.md` | Full documentation |\n| `__tests__/workflows/QUICK_START.md` | This file |\n| `.github/workflows/ci-cd-main.yml` | Tested workflow |\n| `.github/workflows/e2e-testing.yml` | Tested workflow |\n| `.github/workflows/deploy-vercel.yml` | Tested workflow |\n| `.github/workflows/testing-suite.yml` | Tested workflow |\n\n---\n\n## ‚úÖ Pre-Commit Hook\n\nAdd this to `.git/hooks/pre-commit` to validate workflows before commits:\n\n```bash\n#!/bin/bash\n\necho \"üîç Validating pnpm workflow configuration...\"\npnpm test __tests__/workflows/pnpm-workflows.test.ts\n\nif [ $? -ne 0 ]; then\n  echo \"‚ùå Workflow validation failed. Fix issues and try again.\"\n  exit 1\nfi\n\necho \"‚úÖ Workflow validation passed\"\nexit 0\n```\n\n---\n\n## ü§ù Contributing\n\nWhen adding new workflows:\n\n1. **Update tests** to include the new workflow\n2. **Follow same pattern** as existing workflows\n3. **Use pnpm v8** and **Node.js 20**\n4. **Use --frozen-lockfile** for dependencies\n5. **Run tests** before committing:\n   ```bash\n   pnpm test __tests__/workflows/pnpm-workflows.test.ts\n   ```\n\n---\n\n## üìû Support\n\nFor help:\n\n1. Check `PNPM_TESTS_README.md` for detailed documentation\n2. Review test file comments and assertions\n3. Check pnpm documentation: https://pnpm.io/\n4. Check GitHub Actions docs: https://docs.github.com/en/actions\n\n---\n\n**Last Updated**: 2024  \n**Test Framework**: Vitest  \n**Node Version**: 20  \n**pnpm Version**: 8\n"