# Ghost Backend Dockerfile
FROM ghost:5-alpine

WORKDIR /var/lib/ghost

# Copy Ghost configuration
COPY src/api/ghost-backend/config.production.json ./config.production.json

# Expose port
EXPOSE 8000

# Health check
HEALTHCHECK --interval=30s --timeout=10s --start-period=5s --retries=3 \
    CMD curl -f http://localhost:8000/ghost/api/v3/admin/site/ || exit 1

# Start Ghost
CMD ["node", "current/index.js"]