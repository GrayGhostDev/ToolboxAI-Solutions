# ============================================
# TOOLBOXAI PRODUCTION ENVIRONMENT TEMPLATE
# ============================================
# CRITICAL: This is a template file. Copy to .env.production and update ALL values
# DO NOT commit .env.production to version control
# Generate secure values for all secrets before deployment

# --------------------------------------------
# ENVIRONMENT SETTINGS
# --------------------------------------------
NODE_ENV=production
ENV=production
ENV_NAME=production
DEBUG=false

# --------------------------------------------
# SECURITY-CRITICAL SETTINGS (MUST BE SET)
# --------------------------------------------
# Generate using: python -c "import secrets; print(secrets.token_urlsafe(64))"
JWT_SECRET_KEY=GENERATE_SECURE_64_CHAR_SECRET_REQUIRED
SECRET_KEY=GENERATE_SECURE_64_CHAR_SECRET_REQUIRED

# JWT Security (Following OAuth 3.0 best practices)
JWT_ALGORITHM=HS256
JWT_EXPIRATION_MINUTES=15  # Short-lived access tokens
JWT_REFRESH_EXPIRATION_DAYS=7  # Refresh token expiration

# --------------------------------------------
# DATABASE CONFIGURATION (SECURE)
# --------------------------------------------
# Generate strong passwords using: openssl rand -base64 32
DATABASE_URL=postgresql://eduplatform:GENERATE_SECURE_PASSWORD_HERE@your-db-host:5432/educational_platform_prod
DATABASE_SSL=require  # Always use SSL in production
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=40

# PostgreSQL Direct Settings
POSTGRES_HOST=your-db-host.example.com
POSTGRES_PORT=5432
POSTGRES_DB=educational_platform_prod
POSTGRES_USER=eduplatform
POSTGRES_PASSWORD=GENERATE_SECURE_PASSWORD_HERE
POSTGRES_SSL_MODE=require

# --------------------------------------------
# REDIS CONFIGURATION (SECURE)
# --------------------------------------------
REDIS_URL=redis://:GENERATE_SECURE_PASSWORD_HERE@your-redis-host:6379/0
REDIS_HOST=your-redis-host.example.com
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=GENERATE_SECURE_PASSWORD_HERE
REDIS_SSL=true

# --------------------------------------------
# API KEYS (REQUIRED FOR PRODUCTION)
# --------------------------------------------
# OpenAI API
OPENAI_API_KEY=sk-XXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# Anthropic Claude API
ANTHROPIC_API_KEY=sk-ant-XXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# Pusher Realtime
PUSHER_APP_ID=XXXXXX
PUSHER_KEY=XXXXXXXXXXXXXXXXXXXXX
PUSHER_SECRET=XXXXXXXXXXXXXXXXXXXXX
PUSHER_CLUSTER=us2

# LMS Integrations
SCHOOLOGY_KEY=XXXXXXXXXXXXXXXXXXXXX
SCHOOLOGY_SECRET=XXXXXXXXXXXXXXXXXXXXX
CANVAS_API_TOKEN=XXXXXXXXXXXXXXXXXXXXX
CANVAS_BASE_URL=https://your-school.instructure.com

# --------------------------------------------
# SERVER CONFIGURATION
# --------------------------------------------
HOST=0.0.0.0
PORT=8008
API_URL=https://api.yourdomain.com/api/v1
FRONTEND_URL=https://app.yourdomain.com

# --------------------------------------------
# CORS CONFIGURATION (RESTRICTIVE)
# --------------------------------------------
# Only allow specific production domains
CORS_ORIGINS=["https://app.yourdomain.com","https://www.yourdomain.com"]
CORS_ALLOWED_METHODS=["GET","POST","PUT","DELETE","OPTIONS"]
CORS_ALLOWED_HEADERS=["Content-Type","Authorization","X-Request-ID"]
CORS_ALLOW_CREDENTIALS=true

# --------------------------------------------
# SESSION SECURITY
# --------------------------------------------
SESSION_TYPE=redis
SESSION_PERMANENT=false
SESSION_USE_SIGNER=true
SESSION_KEY_PREFIX=prod_session:
SESSION_COOKIE_NAME=toolboxai_session
SESSION_COOKIE_SECURE=true  # HTTPS only
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=Strict  # Strict CSRF protection

# --------------------------------------------
# RATE LIMITING
# --------------------------------------------
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_PERIOD=60
RATE_LIMIT_STORAGE_URL=${REDIS_URL}

# --------------------------------------------
# MONITORING & LOGGING
# --------------------------------------------
LOG_LEVEL=WARNING  # Production: WARNING or ERROR
LOG_FILE=/var/log/toolboxai/production.log
LOG_ROTATE_SIZE=100M
LOG_ROTATE_COUNT=10

# Sentry Error Tracking (Required for production)
SENTRY_DSN=https://XXXXXXXXXXXXXXXXXXXXX@sentry.io/XXXXXX
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# Prometheus Metrics
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090

# --------------------------------------------
# EMAIL CONFIGURATION (PRODUCTION)
# --------------------------------------------
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USER=apikey
SMTP_PASSWORD=SG.XXXXXXXXXXXXXXXXXXXXXXXXXXXXX
FROM_EMAIL=noreply@yourdomain.com
SUPPORT_EMAIL=support@yourdomain.com

# --------------------------------------------
# FILE SECURITY
# --------------------------------------------
MAX_UPLOAD_SIZE=10485760  # 10MB
ALLOWED_EXTENSIONS=["pdf","png","jpg","jpeg"]
UPLOAD_FOLDER=/secure/uploads/
SECURE_FILE_DOWNLOADS=true

# --------------------------------------------
# COMPLIANCE & LEGAL
# --------------------------------------------
COPPA_AGE_LIMIT=13
COPPA_COMPLIANCE=true
FERPA_COMPLIANCE=true
GDPR_ENABLED=true
GDPR_COMPLIANCE=true
DATA_RETENTION_DAYS=365
AUDIT_LOG_ENABLED=true
AUDIT_LOG_PATH=/secure/audit/

# --------------------------------------------
# SECURITY HEADERS
# --------------------------------------------
SECURITY_HEADERS_ENABLED=true
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true
HSTS_PRELOAD=true
CSP_POLICY="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data:; connect-src 'self' https://api.yourdomain.com"

# --------------------------------------------
# BACKUP & DISASTER RECOVERY
# --------------------------------------------
BACKUP_ENABLED=true
BACKUP_PATH=/secure/backups/
BACKUP_RETENTION_DAYS=30
AUTO_BACKUP_ENABLED=true
BACKUP_ENCRYPTION_KEY=GENERATE_SECURE_KEY_HERE

# --------------------------------------------
# CDN & STATIC FILES
# --------------------------------------------
STATIC_URL=/static/
MEDIA_URL=/media/
CDN_URL=https://cdn.yourdomain.com
CDN_SECRET_KEY=XXXXXXXXXXXXXXXXXXXXX

# --------------------------------------------
# THIRD-PARTY SERVICES (PRODUCTION)
# --------------------------------------------
# Stripe Payment Processing
STRIPE_PUBLIC_KEY=pk_live_XXXXXXXXXXXXXXXXXXXXX
STRIPE_SECRET_KEY=sk_live_XXXXXXXXXXXXXXXXXXXXX
STRIPE_WEBHOOK_SECRET=whsec_XXXXXXXXXXXXXXXXXXXXX

# AWS Services
AWS_ACCESS_KEY_ID=AKIAXXXXXXXXXXXXX
AWS_SECRET_ACCESS_KEY=XXXXXXXXXXXXXXXXXXXXX
AWS_REGION=us-east-1
AWS_S3_BUCKET=toolboxai-production

# --------------------------------------------
# FEATURE FLAGS (PRODUCTION)
# --------------------------------------------
ENABLE_WEBSOCKET=true
ENABLE_GAMIFICATION=true
ENABLE_ANALYTICS=true
ENABLE_AI_ASSISTANT=true
ENABLE_ROBLOX_INTEGRATION=true

# --------------------------------------------
# PERFORMANCE TUNING
# --------------------------------------------
WORKER_PROCESSES=4
WORKER_CONNECTIONS=1000
KEEPALIVE_TIMEOUT=65
CLIENT_MAX_BODY_SIZE=10M

# --------------------------------------------
# SECURITY NOTES
# --------------------------------------------
# 1. Generate all secrets using cryptographically secure methods
# 2. Use different secrets for each environment (dev, staging, prod)
# 3. Rotate secrets regularly (every 90 days minimum)
# 4. Monitor for exposed secrets using tools like GitGuardian
# 5. Use environment-specific encryption keys
# 6. Enable audit logging for all sensitive operations
# 7. Implement IP allowlisting for database access
# 8. Use VPN or private networking for internal services
# 9. Enable 2FA for all admin accounts
# 10. Regular security audits and penetration testing

# ============================================
# END OF PRODUCTION CONFIGURATION TEMPLATE
# ============================================