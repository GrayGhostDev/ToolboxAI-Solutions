{"created": 1758657506.321293, "duration": 0.5598330497741699, "exitcode": 0, "root": "/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions", "environment": {}, "summary": {"passed": 3, "total": 3, "collected": 3}, "collectors": [{"nodeid": "", "outcome": "passed", "result": [{"nodeid": "tests/test_refactored_backend.py::TestBackwardCompatibility", "type": "Class"}]}, {"nodeid": "tests/test_refactored_backend.py::TestBackwardCompatibility", "outcome": "passed", "result": [{"nodeid": "tests/test_refactored_backend.py::TestBackwardCompatibility::test_legacy_endpoint_availability", "type": "Function", "lineno": 286}, {"nodeid": "tests/test_refactored_backend.py::TestBackwardCompatibility::test_response_format_consistency", "type": "Function", "lineno": 303}, {"nodeid": "tests/test_refactored_backend.py::TestBackwardCompatibility::test_refactoring_flags", "type": "Function", "lineno": 326}]}], "tests": [{"nodeid": "tests/test_refactored_backend.py::TestBackwardCompatibility::test_legacy_endpoint_availability", "lineno": 286, "outcome": "passed", "keywords": ["test_legacy_endpoint_availability", "TestBackwardCompatibility", "test_refactored_backend.py", "tests", "ToolBoxAI-Solutions", ""], "setup": {"duration": 0.00931362499250099, "outcome": "passed", "stdout": "{\"timestamp\": \"2025-09-23T19:58:26.245345+00:00\", \"level\": \"INFO\", \"logger\": \"tests.conftest\", \"message\": \"Created new event loop\", \"module\": \"conftest\", \"function\": \"event_loop\", \"line\": 100}\n{\"timestamp\": \"2025-09-23T19:58:26.246893+00:00\", \"level\": \"INFO\", \"logger\": \"apps.backend.core.security.rate_limit_manager\", \"message\": \"Rate limiting testing mode enabled\", \"module\": \"rate_limit_manager\", \"function\": \"set_testing_mode\", \"line\": 238}\n", "log": [{"name": "tests.conftest", "msg": "Created new event loop", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/tests/conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 100, "funcName": "event_loop", "created": 1758657506.245328, "msecs": 245.0, "relativeCreated": 5661.979913711548, "thread": 8709562560, "threadName": "MainThread", "processName": "MainProcess", "process": 37164, "taskName": null}, {"name": "apps.backend.core.security.rate_limit_manager", "msg": "Rate limiting testing mode enabled", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/apps/backend/core/security/rate_limit_manager.py", "filename": "rate_limit_manager.py", "module": "rate_limit_manager", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 238, "funcName": "set_testing_mode", "created": 1758657506.246884, "msecs": 246.0, "relativeCreated": 5663.536071777344, "thread": 8709562560, "threadName": "MainThread", "processName": "MainProcess", "process": 37164, "taskName": null}]}, "call": {"duration": 0.00018583300698082894, "outcome": "passed"}, "teardown": {"duration": 0.0107245000108378, "outcome": "passed"}}, {"nodeid": "tests/test_refactored_backend.py::TestBackwardCompatibility::test_response_format_consistency", "lineno": 303, "outcome": "passed", "keywords": ["test_response_format_consistency", "TestBackwardCompatibility", "test_refactored_backend.py", "tests", "ToolBoxAI-Solutions", ""], "setup": {"duration": 0.0013936249888502061, "outcome": "passed", "log": [{"name": "apps.backend.core.security.rate_limit_manager", "msg": "Rate limiting testing mode enabled", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/apps/backend/core/security/rate_limit_manager.py", "filename": "rate_limit_manager.py", "module": "rate_limit_manager", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 238, "funcName": "set_testing_mode", "created": 1758657506.2597241, "msecs": 259.0, "relativeCreated": 5676.376104354858, "thread": 8709562560, "threadName": "MainThread", "processName": "MainProcess", "process": 37164, "taskName": null}]}, "call": {"duration": 0.03345425000588875, "outcome": "passed", "log": [{"name": "apps.backend.core.logging", "msg": "Request started: GET /health", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/apps/backend/core/logging.py", "filename": "logging.py", "module": "logging", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 302, "funcName": "dispatch", "created": 1758657506.286217, "msecs": 286.0, "relativeCreated": 5702.868938446045, "thread": 15536779264, "threadName": "asyncio-portal-16f606960", "processName": "MainProcess", "process": 37164, "taskName": "anyio.from_thread.BlockingPortal._call_func", "correlation_id": "abc9145d-401d-4d3b-9659-9cfad1592ffa", "request_context": {"method": "GET", "path": "/health", "query_params": {}, "client_host": "testclient", "user_agent": "testclient"}, "extra_fields": {"method": "GET", "path": "/health", "correlation_id": "abc9145d-401d-4d3b-9659-9cfad1592ffa"}}, {"name": "apps.backend.api.routers.health", "msg": "Health check failed: 1 validation error for HealthCheck\nuptime\n  Field required [type=missing, input_value={'status': 'degraded', 't...': ['pusher', 'agents']}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.11/v/missing", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/apps/backend/api/routers/health.py", "filename": "health.py", "module": "health", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 53, "funcName": "health_check", "created": 1758657506.288809, "msecs": 288.0, "relativeCreated": 5705.461025238037, "thread": 15536779264, "threadName": "asyncio-portal-16f606960", "processName": "MainProcess", "process": 37164, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "correlation_id": "abc9145d-401d-4d3b-9659-9cfad1592ffa", "request_context": {"method": "GET", "path": "/health", "query_params": {}, "client_host": "testclient", "user_agent": "testclient"}}, {"name": "apps.backend.core.errors.middleware", "msg": "Unknown error occurred: 1 validation error for HealthCheck\nuptime\n  Field required [type=missing, input_value={'status': 'unhealthy', '...tic.dev/2.11/v/missing\"}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.11/v/missing", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/apps/backend/core/errors/middleware.py", "filename": "middleware.py", "module": "middleware", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/starlette/middleware/base.py\", line 151, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/anyio/streams/memory.py\", line 111, in receive\n    return self.receive_nowait()\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/anyio/streams/memory.py\", line 104, in receive_nowait\n    raise EndOfStream\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/apps/backend/core/errors/middleware.py\", line 416, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/starlette/middleware/base.py\", line 159, in call_next\n    raise app_exc\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/starlette/middleware/base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/starlette/routing.py\", line 78, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/starlette/routing.py\", line 75, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/fastapi/routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/fastapi/routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/apps/backend/api/routers/health.py\", line 54, in health_check\n    return HealthCheck(\n           ^^^^^^^^^^^^\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/pydantic/main.py\", line 253, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\npydantic_core._pydantic_core.ValidationError: 1 validation error for HealthCheck\nuptime\n  Field required [type=missing, input_value={'status': 'unhealthy', '...tic.dev/2.11/v/missing\"}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.11/v/missing", "stack_info": null, "lineno": 348, "funcName": "_handle_unknown_error", "created": 1758657506.288905, "msecs": 288.0, "relativeCreated": 5705.556869506836, "thread": 15536779264, "threadName": "asyncio-portal-16f606960", "processName": "MainProcess", "process": 37164, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro"}, {"name": "apps.backend.core.errors.middleware", "msg": "Error n/a: 1 validation error for HealthCheck\nuptime\n  Field required [type=missing, input_value={'status': 'unhealthy', '...tic.dev/2.11/v/missing\"}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.11/v/missing", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/apps/backend/core/errors/middleware.py", "filename": "middleware.py", "module": "middleware", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/starlette/middleware/base.py\", line 151, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/anyio/streams/memory.py\", line 111, in receive\n    return self.receive_nowait()\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/anyio/streams/memory.py\", line 104, in receive_nowait\n    raise EndOfStream\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/apps/backend/core/errors/middleware.py\", line 416, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/starlette/middleware/base.py\", line 159, in call_next\n    raise app_exc\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/starlette/middleware/base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/starlette/routing.py\", line 78, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/starlette/routing.py\", line 75, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/fastapi/routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/fastapi/routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/apps/backend/api/routers/health.py\", line 54, in health_check\n    return HealthCheck(\n           ^^^^^^^^^^^^\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/pydantic/main.py\", line 253, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\npydantic_core._pydantic_core.ValidationError: 1 validation error for HealthCheck\nuptime\n  Field required [type=missing, input_value={'status': 'unhealthy', '...tic.dev/2.11/v/missing\"}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.11/v/missing", "stack_info": null, "lineno": 385, "funcName": "_log_error", "created": 1758657506.2904892, "msecs": 290.0, "relativeCreated": 5707.141160964966, "thread": 15536779264, "threadName": "asyncio-portal-16f606960", "processName": "MainProcess", "process": 37164, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "error_response": {"status_code": 500, "category": "internal", "message": "1 validation error for HealthCheck\nuptime\n  Field required [type=missing, input_value={'status': 'unhealthy', '...tic.dev/2.11/v/missing\"}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.11/v/missing", "path": "/health", "debug_info": {"exception_type": "ValidationError", "traceback": "Traceback (most recent call last):\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/starlette/middleware/base.py\", line 151, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/anyio/streams/memory.py\", line 111, in receive\n    return self.receive_nowait()\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/anyio/streams/memory.py\", line 104, in receive_nowait\n    raise EndOfStream\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/apps/backend/core/errors/middleware.py\", line 416, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/starlette/middleware/base.py\", line 159, in call_next\n    raise app_exc\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/starlette/middleware/base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/starlette/routing.py\", line 78, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/starlette/routing.py\", line 75, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/fastapi/routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/fastapi/routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/apps/backend/api/routers/health.py\", line 54, in health_check\n    return HealthCheck(\n           ^^^^^^^^^^^^\n  File \"/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/pydantic/main.py\", line 253, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\npydantic_core._pydantic_core.ValidationError: 1 validation error for HealthCheck\nuptime\n  Field required [type=missing, input_value={'status': 'unhealthy', '...tic.dev/2.11/v/missing\"}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.11/v/missing\n", "context": {"request_id": "69242ec5-cd88-4161-927d-960a6716db98", "timestamp": "2025-09-23T19:58:26.288886+00:00", "path": "/health", "method": "GET", "user_id": null, "client_ip": "testclient", "user_agent": "testclient", "correlation_id": null}}}}, {"name": "apps.backend.core.logging", "msg": "Request completed: GET /health - 500", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/apps/backend/core/logging.py", "filename": "logging.py", "module": "logging", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 319, "funcName": "dispatch", "created": 1758657506.291098, "msecs": 291.0, "relativeCreated": 5707.750082015991, "thread": 15536779264, "threadName": "asyncio-portal-16f606960", "processName": "MainProcess", "process": 37164, "taskName": "anyio.from_thread.BlockingPortal._call_func", "correlation_id": "abc9145d-401d-4d3b-9659-9cfad1592ffa", "request_context": {"method": "GET", "path": "/health", "query_params": {}, "client_host": "testclient", "user_agent": "testclient"}, "extra_fields": {"method": "GET", "path": "/health", "status_code": 500, "duration_ms": 4.884004592895508, "correlation_id": "abc9145d-401d-4d3b-9659-9cfad1592ffa"}}, {"name": "httpx", "msg": "HTTP Request: GET http://testserver/health \"HTTP/1.1 500 Internal Server Error\"", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/httpx/_client.py", "filename": "_client.py", "module": "_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 1025, "funcName": "_send_single_request", "created": 1758657506.29188, "msecs": 291.0, "relativeCreated": 5708.531856536865, "thread": 8709562560, "threadName": "MainThread", "processName": "MainProcess", "process": 37164, "taskName": null}, {"name": "apps.backend.core.logging", "msg": "Request started: GET /info", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/apps/backend/core/logging.py", "filename": "logging.py", "module": "logging", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 302, "funcName": "dispatch", "created": 1758657506.292352, "msecs": 292.0, "relativeCreated": 5709.003925323486, "thread": 15536779264, "threadName": "asyncio-portal-16f7d1d30", "processName": "MainProcess", "process": 37164, "taskName": "anyio.from_thread.BlockingPortal._call_func", "correlation_id": "c71f9510-70da-4d83-a3c1-1c62c1c83ffc", "request_context": {"method": "GET", "path": "/info", "query_params": {}, "client_host": "testclient", "user_agent": "testclient"}, "extra_fields": {"method": "GET", "path": "/info", "correlation_id": "c71f9510-70da-4d83-a3c1-1c62c1c83ffc"}}, {"name": "apps.backend.api.routers.health", "msg": "Failed to get app info: 1 validation error for BaseResponse\nsuccess\n  Field required [type=missing, input_value={'status': 'success', 'da...retrieved successfully'}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.11/v/missing", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/apps/backend/api/routers/health.py", "filename": "health.py", "module": "health", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 96, "funcName": "get_app_info", "created": 1758657506.2925599, "msecs": 292.0, "relativeCreated": 5709.211826324463, "thread": 15536779264, "threadName": "asyncio-portal-16f7d1d30", "processName": "MainProcess", "process": 37164, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "correlation_id": "c71f9510-70da-4d83-a3c1-1c62c1c83ffc", "request_context": {"method": "GET", "path": "/info", "query_params": {}, "client_host": "testclient", "user_agent": "testclient"}}, {"name": "apps.backend.core.logging", "msg": "Request completed: GET /info - 500", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/apps/backend/core/logging.py", "filename": "logging.py", "module": "logging", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 319, "funcName": "dispatch", "created": 1758657506.2927418, "msecs": 292.0, "relativeCreated": 5709.393739700317, "thread": 15536779264, "threadName": "asyncio-portal-16f7d1d30", "processName": "MainProcess", "process": 37164, "taskName": "anyio.from_thread.BlockingPortal._call_func", "correlation_id": "c71f9510-70da-4d83-a3c1-1c62c1c83ffc", "request_context": {"method": "GET", "path": "/info", "query_params": {}, "client_host": "testclient", "user_agent": "testclient"}, "extra_fields": {"method": "GET", "path": "/info", "status_code": 500, "duration_ms": 0.39005279541015625, "correlation_id": "c71f9510-70da-4d83-a3c1-1c62c1c83ffc"}}, {"name": "httpx", "msg": "HTTP Request: GET http://testserver/info \"HTTP/1.1 500 Internal Server Error\"", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/httpx/_client.py", "filename": "_client.py", "module": "_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 1025, "funcName": "_send_single_request", "created": 1758657506.293296, "msecs": 293.0, "relativeCreated": 5709.9480628967285, "thread": 8709562560, "threadName": "MainThread", "processName": "MainProcess", "process": 37164, "taskName": null}]}, "teardown": {"duration": 0.011280167003860697, "outcome": "passed"}}, {"nodeid": "tests/test_refactored_backend.py::TestBackwardCompatibility::test_refactoring_flags", "lineno": 326, "outcome": "passed", "keywords": ["test_refactoring_flags", "TestBackwardCompatibility", "test_refactored_backend.py", "tests", "ToolBoxAI-Solutions", ""], "setup": {"duration": 0.0016157089994521812, "outcome": "passed", "log": [{"name": "apps.backend.core.security.rate_limit_manager", "msg": "Rate limiting testing mode enabled", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/apps/backend/core/security/rate_limit_manager.py", "filename": "rate_limit_manager.py", "module": "rate_limit_manager", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 238, "funcName": "set_testing_mode", "created": 1758657506.3064032, "msecs": 306.0, "relativeCreated": 5723.055124282837, "thread": 8709562560, "threadName": "MainThread", "processName": "MainProcess", "process": 37164, "taskName": null}]}, "call": {"duration": 0.0030629999964730814, "outcome": "passed", "log": [{"name": "apps.backend.core.logging", "msg": "Request started: GET /migration/status", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/apps/backend/core/logging.py", "filename": "logging.py", "module": "logging", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 302, "funcName": "dispatch", "created": 1758657506.307026, "msecs": 307.0, "relativeCreated": 5723.67787361145, "thread": 15536779264, "threadName": "asyncio-portal-16f57f1a0", "processName": "MainProcess", "process": 37164, "taskName": "anyio.from_thread.BlockingPortal._call_func", "correlation_id": "fc08556f-9bbe-420c-af8c-0bd520f783a9", "request_context": {"method": "GET", "path": "/migration/status", "query_params": {}, "client_host": "testclient", "user_agent": "testclient"}, "extra_fields": {"method": "GET", "path": "/migration/status", "correlation_id": "fc08556f-9bbe-420c-af8c-0bd520f783a9"}}, {"name": "apps.backend.core.logging", "msg": "Request completed: GET /migration/status - 200", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/apps/backend/core/logging.py", "filename": "logging.py", "module": "logging", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 319, "funcName": "dispatch", "created": 1758657506.307536, "msecs": 307.0, "relativeCreated": 5724.187850952148, "thread": 15536779264, "threadName": "asyncio-portal-16f57f1a0", "processName": "MainProcess", "process": 37164, "taskName": "anyio.from_thread.BlockingPortal._call_func", "correlation_id": "fc08556f-9bbe-420c-af8c-0bd520f783a9", "request_context": {"method": "GET", "path": "/migration/status", "query_params": {}, "client_host": "testclient", "user_agent": "testclient"}, "extra_fields": {"method": "GET", "path": "/migration/status", "status_code": 200, "duration_ms": 0.5140304565429688, "correlation_id": "fc08556f-9bbe-420c-af8c-0bd520f783a9"}}, {"name": "httpx", "msg": "HTTP Request: GET http://testserver/migration/status \"HTTP/1.1 200 OK\"", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/httpx/_client.py", "filename": "_client.py", "module": "_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 1025, "funcName": "_send_single_request", "created": 1758657506.3081322, "msecs": 308.0, "relativeCreated": 5724.784135818481, "thread": 8709562560, "threadName": "MainThread", "processName": "MainProcess", "process": 37164, "taskName": null}, {"name": "apps.backend.core.logging", "msg": "Request started: GET /info", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/apps/backend/core/logging.py", "filename": "logging.py", "module": "logging", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 302, "funcName": "dispatch", "created": 1758657506.308469, "msecs": 308.0, "relativeCreated": 5725.121021270752, "thread": 15536779264, "threadName": "asyncio-portal-16f57d5b0", "processName": "MainProcess", "process": 37164, "taskName": "anyio.from_thread.BlockingPortal._call_func", "correlation_id": "c4b87a92-9872-4fd1-a250-d42de38075bf", "request_context": {"method": "GET", "path": "/info", "query_params": {}, "client_host": "testclient", "user_agent": "testclient"}, "extra_fields": {"method": "GET", "path": "/info", "correlation_id": "c4b87a92-9872-4fd1-a250-d42de38075bf"}}, {"name": "apps.backend.api.routers.health", "msg": "Failed to get app info: 1 validation error for BaseResponse\nsuccess\n  Field required [type=missing, input_value={'status': 'success', 'da...retrieved successfully'}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.11/v/missing", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/apps/backend/api/routers/health.py", "filename": "health.py", "module": "health", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 96, "funcName": "get_app_info", "created": 1758657506.308766, "msecs": 308.0, "relativeCreated": 5725.417852401733, "thread": 15536779264, "threadName": "asyncio-portal-16f57d5b0", "processName": "MainProcess", "process": 37164, "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "correlation_id": "c4b87a92-9872-4fd1-a250-d42de38075bf", "request_context": {"method": "GET", "path": "/info", "query_params": {}, "client_host": "testclient", "user_agent": "testclient"}}, {"name": "apps.backend.core.logging", "msg": "Request completed: GET /info - 500", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/apps/backend/core/logging.py", "filename": "logging.py", "module": "logging", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 319, "funcName": "dispatch", "created": 1758657506.30895, "msecs": 308.0, "relativeCreated": 5725.6019115448, "thread": 15536779264, "threadName": "asyncio-portal-16f57d5b0", "processName": "MainProcess", "process": 37164, "taskName": "anyio.from_thread.BlockingPortal._call_func", "correlation_id": "c4b87a92-9872-4fd1-a250-d42de38075bf", "request_context": {"method": "GET", "path": "/info", "query_params": {}, "client_host": "testclient", "user_agent": "testclient"}, "extra_fields": {"method": "GET", "path": "/info", "status_code": 500, "duration_ms": 0.4820823669433594, "correlation_id": "c4b87a92-9872-4fd1-a250-d42de38075bf"}}, {"name": "httpx", "msg": "HTTP Request: GET http://testserver/info \"HTTP/1.1 500 Internal Server Error\"", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/Volumes/G-DRIVE ArmorATD/Development/Clients/ToolBoxAI-Solutions/venv/lib/python3.12/site-packages/httpx/_client.py", "filename": "_client.py", "module": "_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 1025, "funcName": "_send_single_request", "created": 1758657506.3095381, "msecs": 309.0, "relativeCreated": 5726.190090179443, "thread": 8709562560, "threadName": "MainThread", "processName": "MainProcess", "process": 37164, "taskName": null}]}, "teardown": {"duration": 0.01148733400623314, "outcome": "passed"}}]}